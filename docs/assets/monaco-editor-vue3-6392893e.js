import{m as W,e as d}from"./monaco-editor-7fb5109a.js";function M(t){if(h(t)){const e={};for(let i=0;i<t.length;i++){const n=t[i],s=g(n)?Y(n):M(n);if(s)for(const o in s)e[o]=s[o]}return e}else{if(g(t))return t;if(k(t))return t}}const K=/;(?![^(]*\))/g,P=/:(.+)/;function Y(t){const e={};return t.split(K).forEach(i=>{if(i){const n=i.split(P);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function V(t){let e="";if(g(t))e=t;else if(h(t))for(let i=0;i<t.length;i++){const n=V(t[i]);n&&(e+=n+" ")}else if(k(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}const G=[],H=()=>{},U=/^on[^a-z]/,q=t=>U.test(t),x=Object.assign,h=Array.isArray,_=t=>typeof t=="function",g=t=>typeof t=="string",k=t=>t!==null&&typeof t=="object";let J;function Q(t,e=J){e&&e.active&&e.effects.push(t)}const X=t=>{const e=new Set(t);return e.w=0,e.n=0,e},N=t=>(t.w&f)>0,O=t=>(t.n&f)>0,Z=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=f},tt=t=>{const{deps:e}=t;if(e.length){let i=0;for(let n=0;n<e.length;n++){const s=e[n];N(s)&&!O(s)?s.delete(t):e[i++]=s,s.w&=~f,s.n&=~f}e.length=i}};let p=0,f=1;const b=30;let u;class et{constructor(e,i=null,n){this.fn=e,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,Q(this,n)}run(){if(!this.active)return this.fn();let e=u,i=y;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=u,u=this,y=!0,f=1<<++p,p<=b?Z(this):F(this),this.fn()}finally{p<=b&&tt(this),f=1<<--p,u=this.parent,y=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){u===this?this.deferStop=!0:this.active&&(F(this),this.onStop&&this.onStop(),this.active=!1)}}function F(t){const{deps:e}=t;if(e.length){for(let i=0;i<e.length;i++)e[i].delete(t);e.length=0}}let y=!0;function it(t,e){let i=!1;p<=b?O(t)||(t.n|=f,i=!N(t)):i=!t.has(u),i&&(t.add(u),u.deps.push(t))}function nt(t,e){const i=h(t)?t:[...t];for(const n of i)n.computed&&I(n);for(const n of i)n.computed||I(n)}function I(t,e){(t!==u||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function T(t){return $(t)?T(t.__v_raw):!!(t&&t.__v_isReactive)}function $(t){return!!(t&&t.__v_isReadonly)}function D(t){return T(t)||$(t)}function R(t){const e=t&&t.__v_raw;return e?R(e):t}function st(t){y&&u&&(t=R(t),it(t.dep||(t.dep=X())))}function ot(t,e){t=R(t),t.dep&&nt(t.dep)}function z(t){return!!(t&&t.__v_isRef===!0)}function lt(t){const e=h(t)?new Array(t.length):{};for(const i in t)e[i]=ct(t,i);return e}class rt{constructor(e,i,n){this._object=e,this._key=i,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}}function ct(t,e,i){const n=t[e];return z(n)?n:new rt(t,e,i)}class at{constructor(e,i,n,s){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new et(e,()=>{this._dirty||(this._dirty=!0,ot(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=n}get value(){const e=R(this);return st(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function ut(t,e,i=!1){let n,s;const o=_(t);return o?(n=t,s=H):(n=t.get,s=t.set),new at(n,s,o||!s,i)}let m=null,ft=null;const ht=t=>t.__isSuspense;function dt(t){return _(t)?{setup:t,name:t.name}:t}const gt=Symbol(),_t=t=>t.__isTeleport,A=Symbol(void 0),pt=Symbol(void 0),mt=Symbol(void 0),S=[];let a=null;function yt(t=!1){S.push(a=t?null:[])}function St(){S.pop(),a=S[S.length-1]||null}function Et(t){return t.dynamicChildren=a||G,St(),a&&a.push(t),t}function kt(t,e,i,n,s,o){return Et(L(t,e,i,n,s,o,!0))}function Mt(t){return t?t.__v_isVNode===!0:!1}const B="__vInternal",j=({key:t})=>t??null,E=({ref:t,ref_key:e,ref_for:i})=>t!=null?g(t)||z(t)||_(t)?{i:m,r:t,k:e,f:!!i}:t:null;function L(t,e=null,i=null,n=0,s=null,o=t===A?0:1,l=!1,r=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&j(e),ref:e&&E(e),scopeId:ft,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null};return r?(v(c,i),o&128&&t.normalize(c)):i&&(c.shapeFlag|=g(i)?8:16),!l&&a&&(c.patchFlag>0||o&6)&&c.patchFlag!==32&&a.push(c),c}const Rt=Ct;function Ct(t,e=null,i=null,n=0,s=null,o=!1){if((!t||t===gt)&&(t=mt),Mt(t)){const r=w(t,e,!0);return i&&v(r,i),!o&&a&&(r.shapeFlag&6?a[a.indexOf(t)]=r:a.push(r)),r.patchFlag|=-2,r}if(Ft(t)&&(t=t.__vccOpts),e){e=bt(e);let{class:r,style:c}=e;r&&!g(r)&&(e.class=V(r)),k(c)&&(D(c)&&!h(c)&&(c=x({},c)),e.style=M(c))}const l=g(t)?1:ht(t)?128:_t(t)?64:k(t)?4:_(t)?2:0;return L(t,e,i,n,s,l,o,!0)}function bt(t){return t?D(t)||B in t?x({},t):t:null}function w(t,e,i=!1){const{props:n,ref:s,patchFlag:o,children:l}=t,r=e?Vt(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:r,key:r&&j(r),ref:e&&e.ref?i&&s?h(s)?s.concat(E(e)):[s,E(e)]:E(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==A?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&w(t.ssContent),ssFallback:t.ssFallback&&w(t.ssFallback),el:t.el,anchor:t.anchor}}function wt(t=" ",e=0){return Rt(pt,null,t,e)}function v(t,e){let i=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(h(e))i=16;else if(typeof e=="object")if(n&65){const s=e.default;s&&(s._c&&(s._d=!1),v(t,s()),s._c&&(s._d=!0));return}else{i=32;const s=e._;!s&&!(B in e)?e._ctx=m:s===3&&m&&(m.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else _(e)?(e={default:e,_ctx:m},i=32):(e=String(e),n&64?(i=16,e=[wt(e)]):i=8);t.children=e,t.shapeFlag|=i}function Vt(...t){const e={};for(let i=0;i<t.length;i++){const n=t[i];for(const s in n)if(s==="class")e.class!==n.class&&(e.class=V([e.class,n.class]));else if(s==="style")e.style=M([e.style,n.style]);else if(q(s)){const o=e[s],l=n[s];l&&o!==l&&!(h(o)&&o.includes(l))&&(e[s]=o?[].concat(o,l):l)}else s!==""&&(e[s]=n[s])}return e}let vt=!1;function Ft(t){return _(t)&&"__vccOpts"in t}const It=(t,e)=>ut(t,e,vt);var xt=(t,e)=>{const i=t.__vccOpts||t;for(const[n,s]of e)i[n]=s;return i};const Nt=dt({name:"MonacoEditor",props:{diffEditor:{type:Boolean,default:!1},width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:"100%"},original:String,value:String,language:{type:String,default:"javascript"},theme:{type:String,default:"vs"},options:{type:Object,default(){return{}}}},emits:["editorWillMount","editorDidMount","change","update:value"],setup(t){const{width:e,height:i}=lt(t);return{style:It(()=>{const s=e.value.toString().includes("%")?e.value:`${e.value}px`,o=i.value.toString().includes("%")?i.value:`${i.value}px`;return{width:s,height:o,"text-align":"left"}})}},mounted(){this.initMonaco()},beforeDestroy(){this.editor&&this.editor.dispose()},methods:{initMonaco(){this.$emit("editorWillMount",W);const{value:t,language:e,theme:i,options:n}=this;this.editor=d[this.diffEditor?"createDiffEditor":"create"](this.$el,{value:t,language:e,theme:i,...n}),this.diffEditor&&this._setModel(this.value,this.original);const s=this._getEditor();s&&s.onDidChangeModelContent(o=>{const l=s.getValue();this.value!==l&&(this.$emit("change",l,o),this.$emit("update:value",l))}),this.$emit("editorDidMount",this.editor)},_setModel(t,e){const{language:i}=this,n=d.createModel(e,i),s=d.createModel(t,i);this.editor.setModel({original:n,modified:s})},_setValue(t){let e=this._getEditor();if(e)return e.setValue(t)},_getValue(){let t=this._getEditor();return t?t.getValue():""},_getEditor(){return this.editor?this.diffEditor?this.editor.modifiedEditor:this.editor:null},_setOriginal(){const{original:t}=this.editor.getModel();t.setValue(this.original)}},watch:{options:{deep:!0,handler(t){this.editor.updateOptions(t)}},value(){this.value!==this._getValue()&&this._setValue(this.value)},original(){this._setOriginal()},language(){if(this.editor)if(this.diffEditor){const{original:t,modified:e}=this.editor.getModel();d.setModelLanguage(t,this.language),d.setModelLanguage(e,this.language)}else d.setModelLanguage(this.editor.getModel(),this.language)},theme(){d.setTheme(this.theme)}}});function Ot(t,e,i,n,s,o){return yt(),kt("div",{class:"monaco-editor-vue3",style:M(t.style)},null,4)}var C=xt(Nt,[["render",Ot]]);C.install=t=>{t.component(C.name,C)};export{C as default};
